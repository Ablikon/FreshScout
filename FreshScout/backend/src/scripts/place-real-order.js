#!/usr/bin/env node
/**
 * âš ï¸  Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ•: Ğ­Ñ‚Ğ¾Ñ‚ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ Ğ•ĞĞ›Ğ¬ĞĞ Ğ—ĞĞšĞĞ–Ğ•Ğ¢ Ñ‚Ğ¾Ğ²Ğ°Ñ€!
 * 
 * Ğ”ĞµĞ½ÑŒĞ³Ğ¸ Ğ±ÑƒĞ´ÑƒÑ‚ ÑĞ¿Ğ¸ÑĞ°Ğ½Ñ‹ Ñ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ² Wolt.
 * Ğ—Ğ°ĞºĞ°Ğ· Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ Wolt Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¼Ğ¸Ğ½ÑƒÑ‚.
 */

import { placeWoltOrderViaBrowser, closeBrowser } from '../services/stores/wolt.puppeteer.js';

async function placeRealOrder() {
  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  console.log('âš ï¸  Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ•: Ğ Ğ•ĞĞ›Ğ¬ĞĞ«Ğ™ Ğ—ĞĞšĞĞ—!');
  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  console.log('');
  console.log('Ğ­Ñ‚Ğ¾Ñ‚ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°ĞºĞ°Ğ¶ĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ½Ğ° Wolt.');
  console.log('Ğ”ĞµĞ½ÑŒĞ³Ğ¸ Ğ±ÑƒĞ´ÑƒÑ‚ ÑĞ¿Ğ¸ÑĞ°Ğ½Ñ‹ Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ñ‹.');
  console.log('');
  console.log('Ğ—Ğ°ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼:');
  console.log('  - Ğ‘Ğ°Ğ½Ğ°Ğ½Ñ‹ ~1ĞºĞ³ (Ğ¾ĞºĞ¾Ğ»Ğ¾ 1000 KZT)');
  console.log('  - ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½: Wolt Market Shevchenko');
  console.log('  - ĞĞ´Ñ€ĞµÑ: Ñ‚Ğ¾Ñ‚ Ñ‡Ñ‚Ğ¾ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ Wolt');
  console.log('');
  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  console.log('');
  
  // Ğ–Ğ´Ñ‘Ğ¼ 5 ÑĞµĞºÑƒĞ½Ğ´ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ
  console.log('ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ñ Ñ‡ĞµÑ€ĞµĞ· 5 ÑĞµĞºÑƒĞ½Ğ´... (Ctrl+C Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ)');
  await new Promise(r => setTimeout(r, 5000));
  
  console.log('\nğŸš€ ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ñ Ğ·Ğ°ĞºĞ°Ğ·...\n');
  
  try {
    const result = await placeWoltOrderViaBrowser({
      venueSlug: 'wolt-market-shevchenko',
      items: [
        { name: 'Ğ‘Ğ°Ğ½Ğ°Ğ½Ñ‹', quantity: 1 }
      ],
      deliveryAddress: '', // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ°Ğ´Ñ€ĞµÑ Ğ¸Ğ· Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
    });
    
    console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
    if (result.success) {
      console.log('âœ… Ğ—ĞĞšĞĞ— Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ ĞĞ¤ĞĞ ĞœĞ›Ğ•Ğ!');
      console.log('   Order ID:', result.orderId || 'ÑĞ¼. Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Wolt');
      console.log('');
      console.log('ğŸ’¡ Ğ—Ğ°ĞºĞ°Ğ· Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ Wolt');
    } else {
      console.log('âŒ Ğ—ĞĞšĞĞ— ĞĞ• Ğ£Ğ”ĞĞ›Ğ¡Ğ¯');
      console.log('   ĞÑˆĞ¸Ğ±ĞºĞ°:', result.error);
      if (result.debug) {
        console.log('   Debug:', result.debug.substring(0, 200));
      }
    }
    console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
    
  } catch (err) {
    console.error('\nâŒ ĞÑˆĞ¸Ğ±ĞºĞ°:', err.message);
  } finally {
    await closeBrowser();
  }
}

placeRealOrder();
